if (self.CavalryLogger) { CavalryLogger.start_js_script(document.currentScript); }

__d("ChatQuietLinks",["DOM","DataStore","Event","Parent","UserAgent_DEPRECATED","getOrCreateDOMID"],(function(a,b,c,d,e,f){var g={};a={silenceLinks:function(a){h(a,this.removeEmptyHrefs.bind(this))},nukeLinks:function(a){h(a,this.removeAllHrefs.bind(this))},removeEmptyHrefs:function(a){i(a,function(a){return!a||a==="#"})},removeAllHrefs:function(a){i(a)}};function h(a,c){if(!a)return;var d=!!b("UserAgent_DEPRECATED").chrome(),e=!!b("UserAgent_DEPRECATED").chrome()||b("UserAgent_DEPRECATED").ie()>=9||b("UserAgent_DEPRECATED").firefox()>=4;if(g[b("getOrCreateDOMID")(a)])return;g[b("getOrCreateDOMID")(a)]=!0;if(!e)return;if(!d){c&&c(a);return}b("Event").listen(a,"mouseover",function(a){a=b("Parent").byTag(a.getTarget(),"a");if(a){var c=a.getAttribute("href");j(c)&&(b("DataStore").set(a,"stashedHref",a.getAttribute("href")),a.removeAttribute("href"))}});b("Event").listen(a,"mouseout",function(a){a=b("Parent").byTag(a.getTarget(),"a");var c=a&&b("DataStore").remove(a,"stashedHref");j(c)&&a.setAttribute("href",c)});b("Event").listen(a,"mousedown",function(a){if(!a.isDefaultRequested())return!0;a=b("Parent").byTag(a.getTarget(),"a");var c=a&&b("DataStore").get(a,"stashedHref");j(c)&&a.setAttribute("href",c)})}function i(a,c){a=b("DOM").scry(a,"a");c&&(a=a.filter(function(a){return c(a.getAttribute("href"))}));a.forEach(function(a){a.removeAttribute("href"),a.tabIndex||a.setAttribute("tabindex",0)})}function j(a){return a&&a!=="#"}e.exports=a}),null);
__d("Dock",["csx","ArbiterMixin","BlueBar","CSS","ChatQuietLinks","DOM","DataStore","Event","Parent","Scroll","Style","Toggler","Vector","emptyFunction","isKeyActivation","shield"],(function(a,b,c,d,e,f,g){function c(){}Object.assign(c,b("ArbiterMixin"),{MIN_HEIGHT:140,INITIAL_FLYOUT_HEIGHT_OFFSET:10,init:function(a){var c=this;this.init=b("emptyFunction");this.rootEl=a;this.calculateViewportDimensions();b("ChatQuietLinks").removeEmptyHrefs(this.rootEl);b("Event").listen(a,"click",this._onClick.bind(this));var d=a.querySelector(".fbNubButton");d&&b("Event").listen(d,"keypress",this._onKeyPress.bind(this));b("Event").listen(window,"resize",this._onWindowResize.bind(this));b("Toggler").subscribe(["show","hide"],function(d,e){e=e.getActive();if(!b("DOM").contains(a,e))return;if(b("CSS").hasClass(e,"fbNub"))c.notifyNub(e,d),d==="show"&&c._resizeNubFlyout(e);else{e=b("Parent").byClass(e,"fbNubFlyout");e&&b("CSS").conditionClass(e,"menuOpened",d==="show")}});this.inform("init",{},"persistent")},calculateViewportDimensions:function(){return this.viewportDimensions=b("Vector").getViewportDimensions()},getFlyoutHeightOffset:function(){if(this.flyoutHeightOffset)return this.flyoutHeightOffset;this.flyoutHeightOffset=this.INITIAL_FLYOUT_HEIGHT_OFFSET+b("Vector").getElementDimensions(this.rootEl).y;var a=b("BlueBar").getBar();if(a){var c=b("Style").isFixed(a)?"viewport":"document";this.flyoutHeightOffset+=b("Vector").getElementPosition(a,c).y+b("Vector").getElementDimensions(a).y}return this.flyoutHeightOffset},toggle:function(a){var c=this._findFlyout(a);if(!c)return;this.subscribe("init",function(){b("Toggler").toggle(a)})},show:function(a){this.subscribe("init",function(){b("Toggler").show(a)})},showNub:function(a){b("CSS").show(a)},hide:function(a){this.subscribe("init",function(){var c=b("Toggler").getInstance(a);b("DOM").contains(a,c.getActive())&&c.hide()})},hideNub:function(a){b("CSS").hide(a),this.hide(a)},setUseMaxHeight:function(a,c){b("CSS").conditionClass(a,"maxHeight",c!==!1),this._resizeNubFlyout(a)},_resizeNubFlyout:function(a){var c=this,d=this._findFlyout(a);if(!d||b("CSS").hasClass(a,"placeholder")||!(b("CSS").hasClass(a,"openToggler")||b("CSS").hasClass(a,"opened")))return;var e=b("DOM").find(d,"div.fbNubFlyoutOuter"),f=b("DOM").find(e,"div.fbNubFlyoutInner"),g=b("DOM").find(f,"div.fbNubFlyoutBody"),h=b("CSS").hasClass(a,"canBeCompactTab"),i=b("Scroll").getTop(g),j=g.offsetHeight;b("Style").set(g,"height","auto");var k=b("Vector").getElementDimensions(d),l=b("Vector").getElementDimensions(g),m=this.getMaxFlyoutHeight(a);b("Style").set(d,"max-height",m+"px");b("Style").set(e,"max-height",m+"px");k=b("Vector").getElementDimensions(d);e=b("Vector").getElementDimensions(f);m=e.y-l.y;f=k.y-m;e=parseInt(g.style.height||g.clientHeight,10);e=f!==e;k.y>m&&e&&!h&&b("Style").set(g,"height",f+"px");b("CSS").removeClass(d,"swapDirection");var n=b("Vector").getElementPosition(d).x;b("CSS").conditionClass(d,"swapDirection",function(){if(n<0)return!0;return!k||!c.viewportDimensions?!1:n+k.x>c.viewportDimensions.x}());e&&i+j>=l.y?b("Scroll").setTop(g,g.scrollHeight):b("Scroll").setTop(g,i);this.notifyNub(a,"resize")},getMaxFlyoutHeight:function(a){a=this._findFlyout(a);var c=b("Vector").getElementPosition(a,"viewport");a=b("Vector").getElementDimensions(a);if(!this.viewportDimensions||!c)return 0;c=Math.max(this.MIN_HEIGHT,this.viewportDimensions.y-this.getFlyoutHeightOffset())-(this.viewportDimensions.y-c.y-a.y);return Math.max(c,0)},resizeAllFlyouts:function(){var a=this._getAllNubs(),b=a.length;while(b--)this._resizeNubFlyout(a[b])},_getAllNubs:function(){if(!this.rootEl)return[];var a=b("DOM").scry(this.rootEl,"div._50-v.openToggler:not(._s0f)");return a.concat(b("DOM").scry(this.rootEl,"div._50-v.opened:not(._s0f)"))},_onKeyPress:function(a){var c=a.getTarget();c=b("Parent").byClass(c,"fbNub");b("isKeyActivation")(a)&&c&&this.toggle(c)},_onClick:function(a){a=a.getTarget();var c=b("Parent").byClass(a,"fbNub");if(c){b("Parent").byClass(a,"adsNubFlyoutCloseButton")&&this.hide(c);if(b("Parent").byClass(a,"fbNubFlyoutTitlebar")){var d=b("Parent").byTag(a,"a");a=a.nodeName=="INPUT"&&a.getAttribute("type")=="submit";if(!d&&!a){this.hide(c);return!1}}this.notifyNub(c,"click")}},_onWindowResize:function(a){this.calculateViewportDimensions(),this.resizeAllFlyouts()},_findFlyout:function(a){return b("CSS").hasClass(a,"fbNubFlyout")?a:b("DOM").scry(a,"div.fbNubFlyout")[0]||null},registerNubController:function(a,c){b("DataStore").set(a,"dock:nub:controller",c),c.subscribe("nub/button/content-changed",b("shield")(this.inform,this,"resize",a)),c.subscribe("nub/flyout/content-changed",b("shield")(this._resizeNubFlyout,this,a))},unregisterNubController:function(a){b("DataStore").remove(a,"dock:nub:controller")},notifyNub:function(a,c,d){a=b("DataStore").get(a,"dock:nub:controller");a&&a.inform(c,d)}});e.exports=a.Dock||c}),null);
__d("KeyboardShortcutToken",["KeyEventController"],(function(a,b,c,d,e,f,g){a=function(){function a(a,b,c){this.$1=!0,this.key=a,this.handler=b,this.filter=c.filter,this.persistOnTransition=c.persistOnTransition,this.shortcutInfo=c.shortcutInfo,this.register()}var b=a.prototype;b.register=function(){var a=this;if(!this.$1)return;this.token=c("KeyEventController").registerKey(this.key,this.handler,this.filter,!1,function(){return a.persistOnTransition})};b.remove=function(){this.token.remove(),this.$1=!1};b.unregister=function(){this.token.remove()};b.isActive=function(){return this.$1};b.getKey=function(){return this.key};b.getShortcutInfo=function(){return this.shortcutInfo};return a}();g["default"]=a}),98);
__d("translateKey",["fbt","invariant"],(function(a,b,c,d,e,f,g,h,i){var j={alt:h._(/*FBT_CALL*/"alt"/*FBT_CALL*/),enter:h._(/*FBT_CALL*/"enter"/*FBT_CALL*/),"delete":h._(/*FBT_CALL*/"delete"/*FBT_CALL*/),shift:h._(/*FBT_CALL*/"shift"/*FBT_CALL*/),opt:h._(/*FBT_CALL*/"opt"/*FBT_CALL*/),ctrl:h._(/*FBT_CALL*/"ctrl"/*FBT_CALL*/),cmd:h._(/*FBT_CALL*/"cmd"/*FBT_CALL*/),esc:h._(/*FBT_CALL*/"esc"/*FBT_CALL*/),tab:h._(/*FBT_CALL*/"tab"/*FBT_CALL*/),up:h._(/*FBT_CALL*/"up"/*FBT_CALL*/),down:h._(/*FBT_CALL*/"down"/*FBT_CALL*/),right:h._(/*FBT_CALL*/"right"/*FBT_CALL*/),left:h._(/*FBT_CALL*/"left"/*FBT_CALL*/),page_up:h._(/*FBT_CALL*/"page up"/*FBT_CALL*/),page_down:h._(/*FBT_CALL*/"page down"/*FBT_CALL*/),home:h._(/*FBT_CALL*/"home"/*FBT_CALL*/),end:h._(/*FBT_CALL*/"end"/*FBT_CALL*/)};function a(a){if(Object.prototype.hasOwnProperty.call(j,a))return j[a];a.length===1||i(0,2507);return a}g["default"]=a}),98);
__d("KeyboardShortcuts",["csx","cx","fbt","Arbiter","BasicFBNux","CSS","Dock","KeyEventController","KeyboardShortcutToken","Layer","ModalLayer","NavigationMessage","PageTransitions","Run","emptyFunction","translateKey"],(function(a,b,c,d,e,f,g,h,i,j){var k={_arbiter:null,_hasTriggeredShortcut:!1,_flyoutNub:null,_nubNux:null,_nubNuxID:null,_tokenLayers:[],showInfo:c("emptyFunction"),register:function(a,b,d){var e=d?d:{};d=function(a,c){b.call(k,a,c),e.allowDefault||a.prevent(),k._hasTriggeredShortcut||k._handleFirstShortcutTriggered()};var f=e.baseFilters||[c("KeyEventController").defaultFilter],g=function(a,b){for(var c=f,d=Array.isArray(c),g=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(d){if(g>=c.length)break;h=c[g++]}else{g=c.next();if(g.done)break;h=g.value}h=h;if(!h(a,b))return!1}return!e.filter||e.filter(a,b)};a=new(c("KeyboardShortcutToken"))(a,d,{filter:g,persistOnTransition:e.persistOnTransition,shortcutInfo:e.shortcutInfo});k._tokenLayers.length||k._tokenLayers.push([]);k._tokenLayers[k._tokenLayers.length-1].push(a);k.inform("token_added");return a},init:function(){k._cleanup=k._cleanup.bind(k),d("Run").onLeave(k._cleanup),c("Arbiter").subscribe(c("NavigationMessage").NAVIGATION_BEGIN,k._cleanup),c("Layer").subscribe("show",function(a,b){b.hasBehavior(c("ModalLayer"))&&k.pushLayer()}),c("Layer").subscribe("hide",function(a,b){b.hasBehavior(c("ModalLayer"))&&k.popLayer()}),k.register("SLASH",function(){var a=k._getFlyoutNub();a&&c("Dock").toggle(a)},{filter:function(a,b){return a.getModifiers().shift},persistOnTransition:!0,shortcutInfo:{displayKeys:[c("translateKey")("?")],description:j._(/*FBT_CALL*/"Show this help dialogue"/*FBT_CALL*/)}})},_cleanup:function(){var a=[];k._tokenLayers.forEach(function(b){var c=[];b.forEach(function(a){a.isActive()&&c.push(a)});c.length&&a.push(c)});k._tokenLayers=a;k.inform("cleanup");c("PageTransitions").registerCompletionCallback(function(){d("Run").onLeave(k._cleanup),c("Arbiter").subscribe(c("NavigationMessage").NAVIGATION_BEGIN,k._cleanup)})},pushLayer:function(){var a=k._getTopLayer();a&&a.forEach(function(a){a.unregister()});k._tokenLayers.push([])},popLayer:function(){if(k._tokenLayers.length===0)return;var a=k._tokenLayers.pop();a.forEach(function(a){a.remove()});a=k._getTopLayer();a&&a.forEach(function(a){a.register()})},_getTopLayer:function(){return!k._tokenLayers.length?null:k._tokenLayers[k._tokenLayers.length-1]},_getBaseLayer:function(){return!k._tokenLayers.length?null:k._tokenLayers[0]},getShortcutInfos:function(){var a=[],b=k._getBaseLayer();b&&b.forEach(function(b){var c=b.getShortcutInfo();b.isActive()&&c!=null&&a.push(c)});return a},_getArbiterInstance:function(){k._arbiter||(k._arbiter=new(c("Arbiter"))());return k._arbiter},inform:function(a,b,c){return k._getArbiterInstance().inform(a,b,c)},subscribe:function(a,b,c){return k._getArbiterInstance().subscribe(a,b,c)},unsubscribe:function(a){k._getArbiterInstance().unsubscribe(a)},_handleFirstShortcutTriggered:function(){k._hasTriggeredShortcut=!0;var a=k._getFlyoutNub();a&&(d("CSS").removeClass(a,"_ur5"),k._nubNux&&k._nubNuxID&&(k._nubNux.show(),d("BasicFBNux").onView(k._nubNuxID),k._nubNux.subscribe("hide",d("BasicFBNux").onDismiss.bind(k,k._nubNuxID))))},_getFlyoutNub:function(){k._flyoutNub||(k._flyoutNub=document.querySelector("#pagelet_dock ._rz3"));return k._flyoutNub},showShortcutFlyout:function(){k._hasTriggeredShortcut||k._handleFirstShortcutTriggered();var a=k._getFlyoutNub();a&&c("Dock").show(a)},hasFlyoutToShow:function(){return k._getFlyoutNub()!=null&&k.getShortcutInfos().length>0},initNUXEvent:function(a,b){k._nubNux=a,k._nubNuxID=b}};k.init();a=k;g["default"]=a}),98);
__d("FlipDirection",["DOM","Input","Style"],(function(a,b,c,d,e,f){a={setDirection:function(a,c,d){c===void 0&&(c=5);d===void 0&&(d=!1);var e=b("DOM").isNodeOfType(a,"input")&&a.type=="text",f=b("DOM").isNodeOfType(a,"textarea");if(!(e||f)||a.getAttribute("data-prevent-auto-flip"))return;e=b("Input").getValue(a);f=a.style&&a.style.direction;if(!f||d){f=0;d=!0;for(var g=0;g<e.length;g++){var h=e.charCodeAt(g);if(h>=48){d&&(d=!1,f++);if(h>=1470&&h<=1920){b("Style").set(a,"direction","rtl");a.setAttribute("dir","rtl");return}if(f==c){b("Style").set(a,"direction","ltr");a.setAttribute("dir","ltr");return}}else d=!0}}else e.length===0&&(b("Style").set(a,"direction",""),a.removeAttribute("dir"))}};e.exports=a}),null);
__d("XReferer",["Base64","Cookie","FBJSON","URI","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){function a(a,b,d){if(!d){c("Cookie").set("x-referer","");return}a!=null&&(a=i(a));b!=null&&(b=i(b));var e=window.location.pathname+window.location.search;d=c("URI").getRequestURI();var f=d.getSubdomain();b!=null&&h(b,e,f);a!=null&&c("setTimeoutAcrossTransitions")(function(){a!=null&&h(a,e,f)},0)}function h(a,b,e){a={r:a,h:b,s:e};b=c("Base64").encode(d("FBJSON").stringify(a));c("Cookie").set("x-referer",b)}function i(a){var b=1024;a&&a.length>b&&(a=a.substring(0,b)+"...");return a}g.update=a;g._setCookie=h;g.truncatePath=i}),98);
__d("HistoryManager",["Env","Event","SprinkleConfig","URI","UserAgent_DEPRECATED","XReferer","emptyFunction","gkx","goOrReplace","isInIframe","setIntervalAcrossTransitions"],(function(a,b,c,d,e,f){var g,h,i={history:null,current:0,fragment:null,isInitialized:function(){return!!i._initialized},init:function(){if(!(g||(g=b("Env"))).ALLOW_TRANSITION_IN_IFRAME&&b("isInIframe")())return;if(i._initialized)return i;var a=new(h||(h=b("URI")))(window.location.href),c=a.getFragment()||"";c.charAt(0)==="!"&&(c=c.substr(1),a.setFragment(c));Object.assign(i,{_initialized:!0,fragment:c,orig_fragment:c,history:[a],callbacks:[],lastChanged:Date.now(),canonical:new h("#"),user:0,enabled:!0,debug:b("emptyFunction")});if(window.history&&window.history.pushState){this.lastURI=document.URL;c=new(h||(h=b("URI")))(this.lastURI);a=c.getQueryData();a.__md__=void 0;a.__xts__=void 0;a.fb_dtsg_ag=void 0;a[b("SprinkleConfig").param_name]=void 0;this.lastURI=c.setQueryData(a).toString();try{window.history.state&&b("gkx")("819236")?window.history.replaceState(window.history.state,null,this.lastURI):window.history.replaceState(this.lastURI,null,this.lastURI)}catch(a){if(!(a.number===-2147467259))throw a}b("Event").listen(window,"popstate",function(a){var c=a&&a.state&&typeof a.state==="string";c&&i.lastURI!=a.state&&(i.lastURI=document.URL,i.lastChanged=Date.now(),i.notify(new(h||(h=b("URI")))(a.state).getUnqualifiedURI().toString()))});(b("UserAgent_DEPRECATED").webkit()<534||b("UserAgent_DEPRECATED").chrome()<=13)&&(b("setIntervalAcrossTransitions")(i.checkURI,42),i._updateRefererURI(this.lastURI));return i}i._updateRefererURI(h.getRequestURI(!1));if(b("UserAgent_DEPRECATED").webkit()<500||b("UserAgent_DEPRECATED").firefox()<2){i.enabled=!1;return i}"onhashchange"in window?b("Event").listen(window,"hashchange",function(){window.setTimeout(i.checkURI.bind(i),0)}):b("setIntervalAcrossTransitions")(i.checkURI,42);return i},registerURIHandler:function(a){i.callbacks.push(a);return i},setCanonicalLocation:function(a){i.canonical=new(h||(h=b("URI")))(a);return i},notify:function(a){a==i.orig_fragment&&(a=i.canonical.getFragment());for(var b=0;b<i.callbacks.length;b++)try{if(i.callbacks[b](a))return!0}catch(a){}return!1},checkURI:function(){if(Date.now()-i.lastChanged<400)return;if(window.history&&window.history.pushState){var a=new(h||(h=b("URI")))(document.URL).removeQueryData("ref").toString(),c=new h(i.lastURI).removeQueryData("ref").toString();a!=c&&(i.lastChanged=Date.now(),i.lastURI=a,b("UserAgent_DEPRECATED").webkit()<534&&i._updateRefererURI(a),i.notify(new(h||(h=b("URI")))(a).getUnqualifiedURI().toString()));return}if(b("UserAgent_DEPRECATED").webkit()&&window.history.length==200){i.warned||(i.warned=!0);return}c=new(h||(h=b("URI")))(window.location.href).getFragment();c.charAt(0)=="!"&&(c=c.substr(1));c=c.replace(/%23/g,"#");if(c!=i.fragment.replace(/%23/g,"#")){i.debug([c," vs ",i.fragment,"whl: ",window.history.length,"QHL: ",i.history.length].join(" "));for(var a=i.history.length-1;a>=0;--a)if(i.history[a].getFragment().replace(/%23/g,"#")==c)break;++i.user;a>=0?i.go(a-i.current):i.go("#"+c);--i.user}},_updateRefererURI:function(a){a instanceof(h||(h=b("URI")))&&(a=a.toString()),b("XReferer").update(a,null,!0)},go:function(a,c,d){if(window.history&&window.history.pushState){c||typeof a==="number";var e=new(h||(h=b("URI")))(a).removeQueryData(["ref","messaging_source","ajaxpipe_fetch_stream","fb_dtsg_ag",b("SprinkleConfig").param_name]).toString();i.lastChanged=Date.now();this.lastURI=e;d?window.history.replaceState(a,null,e):window.history.pushState(a,null,e);b("UserAgent_DEPRECATED").webkit()<534&&i._updateRefererURI(a);return!1}i.debug("go: "+a);c===void 0&&(c=!0);if(!i.enabled&&!c)return!1;if(typeof a==="number"){if(!a)return!1;e=a+i.current;var f=Math.max(0,Math.min(i.history.length-1,e));i.current=f;e=i.history[f].getFragment()||i.orig_fragment;e=new(h||(h=b("URI")))(e).removeQueryData("ref").getUnqualifiedURI().toString();i.fragment=e;i.lastChanged=Date.now();i.user||b("goOrReplace")(window.location,window.location.href.split("#")[0]+"#!"+e,d);c&&i.notify(e);i._updateRefererURI(e);return!1}a=new(h||(h=b("URI")))(a);a.getDomain()==new(h||(h=b("URI")))(window.location.href).getDomain()&&(a=new(h||(h=b("URI")))("#"+a.getUnqualifiedURI()));f=i.history[i.current].getFragment();e=a.getFragment();if(e==f||f==i.orig_fragment&&e==i.canonical.getFragment()){c&&i.notify(e);i._updateRefererURI(e);return!1}d&&i.current--;f=i.history.length-i.current-1;i.history.splice(i.current+1,f);i.history.push(new h(a));return i.go(1,c,d)},getCurrentFragment:function(){var a=(h||(h=b("URI"))).getRequestURI(!1).getFragment();return a==i.orig_fragment?i.canonical.getFragment():a}};e.exports=i}),null);
__d("escapeJSQuotes",[],(function(a,b,c,d,e,f){function a(a){return typeof a==="undefined"||a==null||!a.valueOf()?"":a.toString().replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\"/g,"\\x22").replace(/\'/g,"\\'").replace(/</g,"\\x3c").replace(/>/g,"\\x3e").replace(/&/g,"\\x26")}f["default"]=a}),66);
__d("PageTransitionsBlue",["fbt","invariant","Arbiter","BlueCompatBroker","BlueCompatRouter","Bootloader","DOMQuery","DOMScroll","Env","ErrorGuard","Event","FbtResultBase","HistoryManager","LayerHideOnEscape","PageHooks","PageTransitionsConfig","PageTransitionsRegistrar","ScriptPath","URI","Vector","areEqual","clickRefAction","escapeJSQuotes","ge","gkx","goOrReplace","isFacebookURI","isInIframe","react","setTimeout"],(function(a,b,c,d,e,f,g,h,i){var j=d("react"),k=["cquick","ctarget","cquick_token","mh_","killabyte","tfc_","tfi_"],l={};function m(a,b){a&&(l[a.getUnqualifiedURI().toString()]=b)}function n(a){return l[a.getUnqualifiedURI().toString()]}function o(a){delete l[a.getUnqualifiedURI().toString()]}function p(){var a={};window.location.search.slice(1).split("&").forEach(function(b){b=b.split("=");var c=b[0];b=b[1];b=b===void 0?null:b;k.some(function(a){return c.startsWith(a)})&&(a[c]=b)});return a}var q=null,r=!1,s=new(c("URI"))(""),t=null,u=new(c("URI"))(),v=null,w=!1,x=!1,y=!1,z={isInitialized:function(){return r},init:function(){z._init()},_init:function(){if(c("isInIframe")())return!1;if(r)return!0;var a=c("PageTransitionsRegistrar").getMostRecentURI();q=a;s=a;t=null;u=a;var b=c("ErrorGuard").applyWithGuard(function(a){return c("URI").tryParseURI(a)},null,[document.referrer]);v=document.referrer&&b&&c("isFacebookURI")(b)?b:null;r=!0;b=c("URI").getRequestURI(!1);b.getFragment().startsWith("/")?b=b.getFragment():b=a.toString();c("HistoryManager").init().setCanonicalLocation("#"+b).registerURIHandler(z._historyManagerHandler);c("Event").listen(window,"scroll",function(){w||m(q,c("Vector").getScrollPosition())});return!0},registerHandler:c("PageTransitionsRegistrar").registerHandler,removeHandler:c("PageTransitionsRegistrar").removeHandler,getCurrentURI:function(a){a===void 0&&(a=!1);z._init();return!q&&!a?new(c("URI"))(s):new(c("URI"))(q)},isTransitioning:function(){z._init();return!q},getNextURI:function(){z._init();return u},getNextReferrerURI:function(){z._init();return t},getReferrerURI:function(){z._init();return v},getMostRecentURI:function(){z._init();return new(c("URI"))(s)},go:function(a,b){b===void 0&&(b=!1);if(c("BlueCompatRouter").goFragment(a)){var d=new(c("URI"))(a);if(z.restoreScrollPosition(d)){q=s=d;return}}if(c("BlueCompatRouter").go(a,b))return;z.goBase(a,b)},goBase:function(a,b){b===void 0&&(b=!1);z._init();var d=p(),e=new(c("URI"))(a).removeQueryData("quickling").addQueryData(d).getQualifiedURI();o(e);b||c("clickRefAction")("uri",{href:e.toString()},null,"INDIRECT");z._loadPage(e,b,function(a){a?c("HistoryManager").go(e.toString(),!1,b):c("goOrReplace")(window.location,e,b)})},_historyManagerHandler:function(a){if(a.charAt(0)!="/")return!1;c("clickRefAction")("h",{href:a});d("ScriptPath").getClickPointInfo()||d("ScriptPath").setClickPointInfo({click:"back"});z._loadPage(new(c("URI"))(a),!0,function(b){b||c("goOrReplace")(window.location,a,!0)});return!0},_loadPage:function(a,b,e){if(new(c("URI"))(a).getFragment()&&c("areEqual")(new(c("URI"))(a).setFragment("").getQualifiedURI(),new(c("URI"))(q).setFragment("").getQualifiedURI())){c("Arbiter").inform("pre_page_fragment_transition",{from:new(c("URI"))(q).getFragment(),to:new(c("URI"))(a).getFragment()});if(z.restoreScrollPosition(a)){q=s=a;c("Arbiter").inform("page_fragment_transition",{fragment:new(c("URI"))(a).getFragment()});return}}var f;q&&(f=n(q));var g=function(){f&&q&&m(q,f);t=z.getMostRecentURI();q=null;u=a;f&&d("DOMScroll").scrollTo(f,!1);w=!0;var g=z._handleTransition(a,b);e&&(g===c("PageTransitionsRegistrar").DELAY_HISTORY?c("setTimeout")(function(){return e&&e(g)},0):e(g))},h=u;u=a;var i=c("PageHooks").runHooks("onbeforeleavehooks");u=h;i?z._warnBeforeLeaving(i,g):g()},_handleTransition:function(b,d){window.onbeforeleavehooks=void 0;if(x||!b.isSameOrigin())return!1;var e=c("PageTransitionsConfig").reloadOnBootloadError&&z._hasBootloadErrors();if(e)return!1;var f;e=a.AsyncRequest;e&&(f=e.getLastID());c("Arbiter").inform("pre_page_transition",{from:z.getMostRecentURI(),to:b});e=c("PageTransitionsRegistrar")._getTransitionHandlers();for(var g=e.length-1;g>=0;--g){var h=e[g];if(!h)continue;for(var i=h.length-1;i>=0;--i){var j=h[i](b,d);if(j===!0||j===c("PageTransitionsRegistrar").DELAY_HISTORY){var k={sender:z,uri:b,id:f};try{c("Arbiter").inform("page_transition",k)}catch(a){}return j}else h.splice(i,1)}}return!1},disableTransitions:function(){x=!0},disableScrollAnimation:function(){y=!0},_hasBootloadErrors:function(){return c("Bootloader").getErrorCount()>0},unifyURI:function(){z._init(),q=s=u,v=t},transitionComplete:function(a){a===void 0&&(a=!1);z._init();w=!1;z._executeCompletionCallbacks();z.unifyURI();a||q&&z.restoreScrollPosition(q);try{document.activeElement&&document.activeElement.nodeName==="A"&&document.activeElement.blur()}catch(a){}},_executeCompletionCallbacks:function(){var a=c("PageTransitionsRegistrar")._getCompletionCallbacks();a.length>0&&(c("PageTransitionsRegistrar")._resetCompletionCallbacks(),a.forEach(function(a){return a()}))},registerCompletionCallback:c("PageTransitionsRegistrar").registerCompletionCallback,rewriteCurrentURI:function(a,b){z._init();var d=c("PageTransitionsRegistrar")._getTransitionHandlers(),e=d.length||1,f=!1;c("PageTransitionsRegistrar").registerHandler(function(){if(a&&a.toString()==z.getMostRecentURI().getUnqualifiedURI().toString()){z.transitionComplete();return!0}f=!0},e);z.go(b,!0);d.length===e+1&&d[e].length===(f?0:1)||i(0,1302);d.length=e},_warnBeforeLeaving:function(a,b){c("Bootloader").loadModules(["DialogX","XUIDialogTitle.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIGrayText.react"],function(d,e,f,g,i,k){var l=typeof a==="string"||a instanceof String||a instanceof c("FbtResultBase")?{body:a,highlightStay:!1,leaveButtonText:h._(/*FBT_CALL*/"Leave this Page"/*FBT_CALL*/),showCloseButton:!1,stayButtonText:h._(/*FBT_CALL*/"Stay on This Page"/*FBT_CALL*/),title:h._(/*FBT_CALL*/"Leave page?"/*FBT_CALL*/)}:a;e=j.jsx(e,{showCloseButton:l.showCloseButton,children:l.title});g=l.highlightStay?[j.jsx(g,{action:"confirm",label:l.leaveButtonText},"confirm"),j.jsx(g,{action:"cancel",use:"confirm",label:l.stayButtonText,className:"autofocus"},"cancel")]:[j.jsx(g,{action:"cancel",label:l.stayButtonText},"cancel"),j.jsx(g,{action:"confirm",use:"confirm",label:l.leaveButtonText,className:"autofocus"},"confirm")];var m=new d({width:450,addedBehaviors:[c("LayerHideOnEscape")]},j.jsxs("div",{children:[e,j.jsx(f,{children:j.jsx(k,{shade:"medium",size:"medium",children:l.body})}),j.jsx(i,{children:g})]}));m.subscribe("confirm",function(){m.hide(),b()});m.show()},"PageTransitionsBlue")},restoreScrollPosition:function(a){var b=n(a);if(b){d("DOMScroll").scrollTo(b,!1);return!0}function e(a){if(!a)return null;var b="a[name='"+c("escapeJSQuotes")(a)+"']";return d("DOMQuery").scry(document.body,b)[0]||c("ge")(a)}b=e(new(c("URI"))(a).getFragment());if(b){e=!y;d("DOMScroll").scrollTo(b,e);return!0}return!1}};!c("gkx")("524")&&c("Env").isCQuick&&(d("BlueCompatBroker").init(),d("BlueCompatBroker").register("transitionpage",function(b){b=new(c("URI"))(d("BlueCompatBroker").getMessageEventString(b,"uri"));var e=new(c("URI"))(window.location.href);b.removeQueryData("ctarget");e.removeQueryData("ctarget");if(e.toString()===b.toString())return;e=a.AsyncRequest;e&&e.ignoreUpdate();z.goBase(b,!1)}));b=z;a.PageTransitions=z;g["default"]=b}),98);